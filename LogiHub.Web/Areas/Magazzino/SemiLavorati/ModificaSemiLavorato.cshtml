@model LogiHub.Web.Areas.Magazzino.SemiLavorati.ModificaSemiLavoratoViewModel

@{
    string jsIn = "var u=document.getElementById('UbicazioneId'), a=document.getElementById('AziendaEsternaId'); u.disabled=false; u.required=true; a.disabled=true; a.required=false; a.value=''; document.getElementById('astUb').classList.remove('d-none'); document.getElementById('astAz').classList.add('d-none'); a.classList.remove('is-invalid');";

    string jsOut = "var u=document.getElementById('UbicazioneId'), a=document.getElementById('AziendaEsternaId'); a.disabled=false; a.required=true; u.disabled=true; u.required=false; u.value=''; document.getElementById('astAz').classList.remove('d-none'); document.getElementById('astUb').classList.add('d-none'); u.classList.remove('is-invalid');";
}

<form id="formModificaSemilavorato" class="needs-validation" asp-action="Modifica" asp-area="Magazzino" method="post" novalidate>
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id"/>

    <div class="mb-3">
        <label asp-for="Barcode" class="small text-muted d-block mb-1">Barcode *</label>
        <input asp-for="Barcode" class="form-control" required/>
        <div class="invalid-feedback">Codice Barcode obbligatorio</div>
    </div>

    <div class="mb-4">
        <label asp-for="Descrizione" class="small text-muted d-block mb-1">Descrizione *</label>
        <input asp-for="Descrizione" class="form-control" placeholder="Inserisci descrizione..." required/>
        <div class="invalid-feedback">Descrizione obbligatoria</div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <label class="small text-muted d-block mb-1">Ubicazione <span id="astUb" class="@(Model.Uscito ? "d-none" : "")">*</span></label>
            <select asp-for="UbicazioneId" required asp-items="Model.UbicazioniList" class="form-select" id="UbicazioneId" disabled="@(Model.Uscito ? "disabled" : null)">
                <option value="">-- Seleziona --</option>
            </select>
            <div class="invalid-feedback">Ubicazione obbligatoria</div>
        </div>

        <div class="col-md-6">
            <label class="small text-muted d-block mb-1">In carico a <span id="astAz" class="@(!Model.Uscito ? "d-none" : "")">*</span></label>
            <select asp-for="AziendaEsternaId" required asp-items="Model.AziendeList" class="form-select" id="AziendaEsternaId" disabled="@(!Model.Uscito ? "disabled" : null)">
                <option value="">-- Seleziona --</option>
            </select>
            <div class="invalid-feedback">Azienda obbligatoria</div>
        </div>
    </div>

    <label class="d-block small text-muted mb-2">Stato Semilavorato:</label>
    <div class="btn-group w-100 mb-4" role="group">
        <input type="radio" class="btn-check" asp-for="Uscito" value="false" id="StatoIn" onchange="@jsIn">
        <label class="btn btn-outline-success w-50" for="StatoIn"><i class="fas fa-warehouse me-2"></i>In Magazzino</label>

        <input type="radio" class="btn-check" asp-for="Uscito" value="true" id="StatoOut" onchange="@jsOut">
        <label class="btn btn-outline-danger w-50" for="StatoOut"><i class="fas fa-truck-loading me-2"></i>Uscito</label>
    </div>

    <div class="d-flex justify-content-end gap-3">
        <button type="submit" class="btn btn-primary"><i class="fas fa-save me-2"></i>Salva Modifiche</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Annulla</button>
    </div>
</form>